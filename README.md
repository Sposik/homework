# Описание проекта

Этот проект предоставляет набор функций для обработки и анализа банковских транзакций, представленных в виде списка словарей. Основная функциональность включает фильтрацию по состоянию, сортировку по дате, маскировку конфиденциальных данных и форматирование дат.

## Основные функции

### Обработка транзакций

#### `filter_by_state(items: List[Dict], state: str = "EXECUTED") -> List[Dict]`
Фильтрует список транзакций по значению ключа `state`. По умолчанию фильтрует по состоянию `"EXECUTED"`.

**Параметры:**
- `items`: Список транзакций для фильтрации
- `state`: Состояние, по которому производится фильтрация (по умолчанию `"EXECUTED"`)

**Возвращает:**
- Отфильтрованный список транзакций

#### `sort_by_date(items: List[Dict], reverse: bool = True) -> List[Dict]`
Сортирует список транзакций по дате.

**Параметры:**
- `items`: Список транзакций для сортировки
- `reverse`: Если `True`, сортирует по убыванию (по умолчанию). Если `False`, по возрастанию

**Возвращает:**
- Отсортированный список транзакций

### Маскировка данных

#### `mask_account_card(number: str) -> str`
Маскирует номера банковских карт и счетов.

**Параметры:**
- `number`: Строка с номером карты или счета

**Возвращает:**
- Маскированный номер в формате:
  - Для карт: `XXXX XX** **** XXXX`
  - Для счетов: `**XXXX`

#### `get_date(date: str) -> str`
Преобразует ISO формат даты в читаемый формат.

**Параметры:**
- `date`: Строка с датой в формате ISO (YYYY-MM-DDThh:mm:ss.mmmZ)

**Возвращает:**
- Дату в формате DD.MM.YYYY

### Генераторы данных

#### `filter_by_currency(transactions, code="USD")`
Генератор для фильтрации транзакций по коду валюты.

#### `transaction_descriptions(transactions)`
Генератор для получения описаний транзакций.

#### `card_number_generator(start: int = 1, end: int = 9999_9999_9999_9999)`
Генератор номеров банковских карт.

## Тестирование

Проект содержит комплексный набор автоматических тестов на pytest.

### Покрытие тестами

#### Тесты обработки данных (`test_processing.py`)
- Фильтрация по статусу транзакций
- Сортировка по дате (оба направления)
- Обработка пустых списков
- Проверка невалидных форматов дат
- Обработка отсутствующих ключей

#### Тесты маскировки (`test_masks.py`)
- Маскировка номеров карт разных платёжных систем
- Маскировка банковских счетов
- Обработка некорректных номеров
- Проверка различных форматов ввода

#### Тесты виджетов (`test_widget.py`)
- Форматирование различных форматов дат
- Комплексная маскировка данных
- Обработка невалидных входных данных

#### Тесты генераторов (`test_generators.py`)
- Фильтрация транзакций по валюте
- Генерация описаний транзакций
- Генерация номеров карт
- Обработка невалидных параметров

### Запуск тестов

Базовый запуск всех тестов:
\`\`\`bash
pytest
\`\`\`

Запуск с отчётом о покрытии:
\`\`\`bash
pytest --cov=src
\`\`\`

## Пример использования

\`\`\`python
from datetime import datetime
from typing import List, Dict

# Пример данных
items = [
    {"state": "EXECUTED", "date": "2023-10-01T12:34:56.789Z", "description": "Перевод организации", "from": "Счет 1234567890123456", "to": "Счет 9876543210987654", "operationAmount": {"amount": "1000.00", "currency": {"name": "USD", "code": "USD"}}},
    {"state": "CANCELED", "date": "2023-09-15T09:12:34.567Z", "description": "Перевод с карты на карту", "from": "Visa Classic 1234567812345678", "to": "Maestro 9876543298765432", "operationAmount": {"amount": "500.00", "currency": {"name": "EUR", "code": "EUR"}}},
]

# Фильтрация по состоянию
filtered_items = filter_by_state(items)
print(filtered_items)

# Сортировка по дате
sorted_items = sort_by_date(items)
print(sorted_items)

# Маскировка номера счета или карты
masked_account = mask_account_card("Счет 1234567890123456")
print(masked_account)  # Счет **3456

masked_card = mask_account_card("Visa Classic 1234567812345678")
print(masked_card)  # Visa Classic 1234 56** **** 5678

# Корректировка формата даты
formatted_date = get_date("2023-10-01T12:34:56.789Z")
print(formatted_date)  # 01.10.2023
\`\`\`
"@